<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexusGuard DeFi Protocol - Project Dashboard</title>
    
    <!-- External Dependencies -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    
    <style>
        :root {
            --primary-color: #2d3436;
            --secondary-color: #0984e3;
            --success-color: #00b894;
            --warning-color: #fdcb6e;
            --danger-color: #d63031;
            --light-bg: #f5f6fa;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--light-bg);
        }

        .dashboard-container {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px;
        }

        .nav-tabs {
            margin-bottom: 20px;
            border-bottom: 2px solid var(--secondary-color);
        }

        .nav-tabs .nav-link {
            color: var(--primary-color);
            border: none;
            padding: 10px 20px;
            margin-right: 5px;
            border-radius: 5px 5px 0 0;
        }

        .nav-tabs .nav-link.active {
            background-color: var(--secondary-color);
            color: white;
        }

        .section-title {
            color: var(--primary-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .module-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid var(--secondary-color);
        }

        .component-list {
            list-style: none;
            padding-left: 0;
        }

        .component-item {
            padding: 8px;
            margin: 4px 0;
            background: var(--light-bg);
            border-radius: 4px;
            font-size: 0.9em;
        }

        .sprint-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .sprint-column {
            background: white;
            padding: 15px;
            border-radius: 8px;
            min-height: 500px;
        }

        .task-card {
            background: var(--light-bg);
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .dependency-chart {
            width: 100%;
            height: 800px;
            background: white;
            padding: 20px;
            border-radius: 10px;
        }

        .metrics-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .metric-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .progress {
            height: 8px;
            margin-top: 10px;
        }

        /* Custom styles for specific components */
        .security-component {
            border-left-color: var(--danger-color);
        }

        .analytics-component {
            border-left-color: var(--success-color);
        }

        .visualization-component {
            border-left-color: var(--warning-color);
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Navigation Tabs -->
        <ul class="nav nav-tabs" id="projectTabs" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#overview">Project Overview</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#architecture">Architecture</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#sprints">Sprint Board</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#components">Components</a>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Overview Tab -->
            <div class="tab-pane fade show active" id="overview">
                <h1 class="section-title">
                    <i class="fas fa-shield-alt"></i> 
                    NexusGuard DeFi Protocol Overview
                </h1>

                <!-- Metrics Overview -->
                <div class="metrics-panel">
                    <!-- Project Metrics -->
                </div>

                <!-- Quick Status -->
                <div class="row">
                    <!-- Status Cards -->
                </div>
            </div>

            <!-- Architecture Tab -->
            <div class="tab-pane fade" id="architecture">
                <h2 class="section-title">System Architecture</h2>
                <div class="dependency-chart">
                    <div class="mermaid">
                        <!-- Mermaid Diagram Here -->
                    </div>
                </div>
            </div>

            <!-- Sprint Board Tab -->
            <div class="tab-pane fade" id="sprints">
                <h2 class="section-title">Active Sprint Board</h2>
                <div class="sprint-board">
                    <!-- Sprint Columns -->
                </div>
            </div>

            <!-- Components Tab -->
            <div class="tab-pane fade" id="components">
                <h2 class="section-title">Project Components</h2>
                <div class="row">
                    <!-- Component Cards -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initialize Mermaid
        mermaid.initialize({
            theme: 'default',
            securityLevel: 'loose',
            flowchart: {
                curve: 'basis'
            }
        });

        // Component data structure
        const components = {
            // Component definitions will go here
        };

        const componentStructure = {
    core: {
        name: 'Core Protocol',
        components: {
            protocol: {
                name: 'NexusGuardDeFiProtocolV1',
                status: 'in-progress',
                priority: 'critical',
                dependencies: ['SecurityManager', 'Registry'],
                tasks: [
                    { id: 'CORE-1', name: 'Initialize core protocol', status: 'in-progress' },
                    { id: 'CORE-2', name: 'Setup component registration', status: 'pending' },
                ]
            },
            registry: {
                name: 'NexusGuardRegistry',
                status: 'active',
                priority: 'high',
                components: ['BaseRegistry', 'ComponentRegistry']
            },
            bridge: {
                name: 'Cross-Chain Components',
                components: ['CrossChainManager', 'NexusGuardBridge']
            }
        }
    },
    security: {
        name: 'Security Components',
        components: {
            manager: {
                name: 'SecurityManager',
                status: 'in-progress',
                priority: 'critical',
                subcomponents: [
                    'AccessControl',
                    'BlocklistManager',
                    'EmergencySystem',
                    'FraudDetection',
                    'IntrusionDetection',
                    'RateLimiter',
                    'SecurityAudit',
                    'SecurityBenchmark'
                ]
            },
            validator: {
                name: 'Security Validation',
                components: [
                    'SecurityValidator',
                    'SecurityChecks',
                    'SecurityMetrics',
                    'SecurityPatterns'
                ]
            },
            sync: {
                name: 'State Synchronization',
                components: [
                    'ValidatorStateSynchronizer',
                    'NexusGuardStateSynchronizer'
                ]
            }
        }
    },
    analytics: {
        name: 'Analytics System',
        components: {
            engine: {
                name: 'AnalyticsEngine',
                subcomponents: [
                    'AnalyticsStorage',
                    'AnalyticsValidator',
                    'DataAggregator',
                    'ReportGenerator'
                ]
            },
            analysis: {
                name: 'Analysis Components',
                components: [
                    'MarketSentimentAnalyzer',
                    'NexusGuardAdvancedIndicators',
                    'NexusGuardMathematicalAnalysis',
                    'NexusGuardRiskModel'
                ]
            }
        }
    },
    visualization: {
        name: 'Visualization System',
        components: {
            core: {
                name: 'Visualization Core',
                components: [
                    'VisualizationManager',
                    'NexusGuardVisualization',
                    'NexusGuardAdvancedCharting'
                ]
            },
            advanced: {
                name: 'Advanced Features',
                components: [
                    'AdvancedVisualizationBase',
                    'MarketDepthVisualizations',
                    'AnalyticalVisualizationEngine'
                ]
            },
            formatters: {
                name: 'Chart Formatters',
                components: [
                    'AmChartsFormatter',
                    'ApexChartsFormatter',
                    'EChartsFormatter',
                    'HighchartsFormatter',
                    'PlotlyFormatter'
                ]
            }
        }
    }
};

const sprintStructure = {
    current: {
        name: 'Sprint 1: Core Security Implementation',
        startDate: '2024-02-01',
        endDate: '2024-02-15',
        status: 'in-progress',
        tasks: {
            backlog: [
                {
                    id: 'SEC-1',
                    title: 'SecurityManager Implementation',
                    description: 'Implement core security manager with validator integration',
                    priority: 'critical',
                    assignee: 'Security Team',
                    dependencies: [],
                    subtasks: [
                        'Setup security roles',
                        'Implement validation flow',
                        'Add emergency handlers'
                    ]
                },
                // Add more backlog items
            ],
            inProgress: [
                {
                    id: 'SYNC-1',
                    title: 'State Synchronization',
                    description: 'Implement validator state synchronization',
                    priority: 'high',
                    assignee: 'Core Team',
                    dependencies: ['SEC-1']
                },
                // Add more in-progress items
            ],
            review: [
                {
                    id: 'VAL-1',
                    title: 'Validation Framework',
                    description: 'Setup base validation framework',
                    priority: 'high',
                    assignee: 'Validation Team',
                    status: 'in-review'
                },
                // Add more review items
            ],
            done: [
                {
                    id: 'INIT-1',
                    title: 'Project Setup',
                    description: 'Initialize project structure and base contracts',
                    priority: 'high',
                    assignee: 'Core Team',
                    status: 'completed'
                },
                // Add more completed items
            ]
        }
    }
};

// Function to render component tree
function renderComponentTree() {
    const componentContainer = document.getElementById('components');
    Object.keys(componentStructure).forEach(category => {
        const categoryData = componentStructure[category];
        const categoryElement = createCategoryElement(categoryData);
        componentContainer.appendChild(categoryElement);
    });
}

// Function to render sprint board
function renderSprintBoard() {
    const sprintBoard = document.querySelector('.sprint-board');
    Object.keys(sprintStructure.current.tasks).forEach(column => {
        const columnElement = createSprintColumn(column, sprintStructure.current.tasks[column]);
        sprintBoard.appendChild(columnElement);
    });
}

// Function to create category element
function createCategoryElement(categoryData) {
    const categoryDiv = document.createElement('div');
    categoryDiv.className = 'col-md-6 mb-4';
    categoryDiv.innerHTML = `
        <div class="module-card ${categoryData.name.toLowerCase()}-component">
            <h3>${categoryData.name}</h3>
            <div class="component-list">
                ${renderComponents(categoryData.components)}
            </div>
        </div>
    `;
    return categoryDiv;
}

// Function to render components
function renderComponents(components) {
    return Object.keys(components).map(key => {
        const component = components[key];
        return `
            <div class="component-item">
                <strong>${component.name}</strong>
                ${component.subcomponents ? 
                    `<ul>${component.subcomponents.map(sub => 
                        `<li>${sub}</li>`).join('')}</ul>` : ''}
            </div>
        `;
    }).join('');
}

// Initialize dashboard
document.addEventListener('DOMContentLoaded', function() {
    renderComponentTree();
    renderSprintBoard();
});

        // Sprint data structure
        const sprintTasks = {
            // Sprint task definitions will go here
        };

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Dashboard initialization code will go here
        });

        const mermaidConfig = {
    graph: `
    graph TB
        %% Core Protocol Hub
        NexusCore[NexusGuard DeFi Protocol V1]
        
        %% Main Hubs
        NexusCore --> SecurityHub[Security Manager]
        NexusCore --> AnalyticsHub[Analytics Engine]
        NexusCore --> VisualizationHub[Visualization System]
        NexusCore --> Registry[Protocol Registry]
        
        %% Security Components
        subgraph Security Management
            SecurityHub --> |Core Security|SecurityCore[Core Security]
            SecurityHub --> |Validation|SecurityValidation[Validation System]
            SecurityHub --> |Monitoring|SecurityMonitoring[Security Monitoring]
            
            %% Core Security Components
            SecurityCore --> AccessControl
            SecurityCore --> BlocklistManager
            SecurityCore --> EmergencySystem
            SecurityCore --> FraudDetection
            SecurityCore --> IntrusionDetection
            SecurityCore --> RateLimiter
            SecurityCore --> SecurityAudit
            SecurityCore --> SecurityUpdates
            
            %% Validation Components
            SecurityValidation --> BaseValidator
            SecurityValidation --> ComponentValidator
            SecurityValidation --> TransactionValidator
            SecurityValidation --> SecurityBenchmark
            
            %% Monitoring Components
            SecurityMonitoring --> SecurityMonitor
            SecurityMonitoring --> SecurityMetrics
            SecurityMonitoring --> SecurityPatterns
        end
        
        %% Analytics System
        subgraph Analytics System
            AnalyticsHub --> MarketAnalysis[Market Analysis]
            AnalyticsHub --> RiskAnalysis[Risk Analysis]
            AnalyticsHub --> DataProcessing[Data Processing]
            
            %% Market Analysis
            MarketAnalysis --> MarketSentiment[Market Sentiment Analyzer]
            MarketAnalysis --> AdvancedIndicators[Advanced Indicators]
            
            %% Risk Analysis
            RiskAnalysis --> RiskModel[Risk Model]
            RiskAnalysis --> MathAnalysis[Mathematical Analysis]
            
            %% Data Processing
            DataProcessing --> DataAggregator
            DataProcessing --> ReportGenerator
        end
        
        %% Visualization System
        subgraph Visualization
            VisualizationHub --> ChartSystem[Charting System]
            VisualizationHub --> DataViz[Data Visualization]
            VisualizationHub --> RealTime[Real-Time Processing]
            
            %% Charting Components
            ChartSystem --> AdvancedCharting
            ChartSystem --> ChartFormatters[Chart Formatters]
            
            %% Data Visualization
            DataViz --> MarketDepth[Market Depth]
            DataViz --> TechnicalAnalysis[Technical Analysis]
            
            %% Real-Time Components
            RealTime --> RealTimeHandler
            RealTime --> CacheSystem[Cache System]
        end
        
        %% Registry System
        subgraph Registry System
            Registry --> ComponentRegistry
            Registry --> ValidationRegistry
            Registry --> StorageRegistry
        end
        
        %% Cross-Chain Components
        subgraph Cross-Chain
            CrossChainManager --> Bridge[NexusGuard Bridge]
            CrossChainManager --> Verifier[Cross-Chain Verifier]
        end
        
        %% Optimization System
        subgraph System Optimization
            CacheManager --> AdvancedCache
            CacheManager --> GasOptimizer
            CacheManager --> BatchProcessor
        end
    `,

    // Mermaid configuration options
    config: {
        theme: 'default',
        themeVariables: {
            primaryColor: '#00bcd4',
            primaryTextColor: '#fff',
            primaryBorderColor: '#009db1',
            lineColor: '#009db1',
            secondaryColor: '#ff9800',
            tertiaryColor: '#4caf50'
        },
        flowchart: {
            curve: 'basis',
            padding: 15
        }
    }
};

// Metrics Implementation
const metricsSystem = {
    categories: {
        security: {
            name: 'Security Metrics',
            metrics: [
                {
                    name: 'Security Score',
                    value: 94,
                    trend: 'up',
                    color: 'success',
                    icon: 'shield-alt'
                },
                {
                    name: 'Vulnerabilities',
                    value: 0,
                    trend: 'stable',
                    color: 'success',
                    icon: 'bug'
                },
                {
                    name: 'Audit Status',
                    value: 88,
                    trend: 'up',
                    color: 'info',
                    icon: 'check-circle'
                }
            ]
        },
        performance: {
            name: 'Performance Metrics',
            metrics: [
                {
                    name: 'Gas Optimization',
                    value: 92,
                    trend: 'up',
                    color: 'success',
                    icon: 'gas-pump'
                },
                {
                    name: 'Response Time',
                    value: 95,
                    trend: 'up',
                    color: 'success',
                    icon: 'clock'
                },
                {
                    name: 'Cache Hit Rate',
                    value: 89,
                    trend: 'up',
                    color: 'info',
                    icon: 'database'
                }
            ]
        },
        development: {
            name: 'Development Progress',
            metrics: [
                {
                    name: 'Code Coverage',
                    value: 91,
                    trend: 'up',
                    color: 'success',
                    icon: 'code'
                },
                {
                    name: 'Sprint Progress',
                    value: 67,
                    trend: 'up',
                    color: 'warning',
                    icon: 'tasks'
                },
                {
                    name: 'Components Ready',
                    value: 78,
                    trend: 'up',
                    color: 'info',
                    icon: 'puzzle-piece'
                }
            ]
        }
    }
};

// Function to render metrics
function renderMetrics() {
    const metricsPanel = document.querySelector('.metrics-panel');
    Object.values(metricsSystem.categories).forEach(category => {
        category.metrics.forEach(metric => {
            const metricCard = createMetricCard(metric);
            metricsPanel.appendChild(metricCard);
        });
    });
}

// Function to create metric card
function createMetricCard(metric) {
    const card = document.createElement('div');
    card.className = 'metric-card';
    card.innerHTML = `
        <div class="metric-header">
            <i class="fas fa-${metric.icon} text-${metric.color}"></i>
            <h3>${metric.name}</h3>
        </div>
        <div class="metric-value">
            <h4>${metric.value}%</h4>
            <i class="fas fa-arrow-${metric.trend} text-${metric.color}"></i>
        </div>
        <div class="progress">
            <div class="progress-bar bg-${metric.color}" 
                 role="progressbar" 
                 style="width: ${metric.value}%" 
                 aria-valuenow="${metric.value}" 
                 aria-valuemin="0" 
                 aria-valuemax="100">
            </div>
        </div>
    `;
    return card;
}

// Initialize mermaid diagram
function initializeMermaid() {
    const diagramContainer = document.querySelector('.mermaid');
    diagramContainer.innerHTML = mermaidConfig.graph;
    mermaid.initialize(mermaidConfig.config);
}

// Update dashboard initialization
document.addEventListener('DOMContentLoaded', function() {
    renderComponentTree();
    renderSprintBoard();
    renderMetrics();
    initializeMermaid();
    
    // Initialize tooltips and popovers
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
});
    </script>
</body>
</html>
