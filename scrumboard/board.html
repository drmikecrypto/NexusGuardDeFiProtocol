<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexusGuard DeFi Protocol - Development Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body { 
            padding: 20px; 
            background: #f8f9fa; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .hierarchy-chart { 
            background: white; 
            padding: 20px; 
            border-radius: 8px; 
            margin-bottom: 20px;
            overflow: auto;
        }
        .sprint-board { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap: 15px; 
            margin-top: 20px; 
        }
        .sprint-column { 
            background: white; 
            padding: 15px; 
            border-radius: 8px; 
        }
        .task-card { 
            background: #f8f9fa; 
            padding: 10px; 
            margin-bottom: 10px; 
            border-radius: 5px;
            border-left: 4px solid #0d6efd;
        }
        .critical { border-left-color: #dc3545; }
        .high { border-left-color: #ffc107; }
        .medium { border-left-color: #0dcaf0; }
        .section-title { 
            margin: 20px 0; 
            padding-bottom: 10px; 
            border-bottom: 2px solid #0d6efd; 
        }
        .mermaid {
            font-size: 14px;
        }
        .zoom-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        .zoom-btn {
            margin: 5px;
            padding: 10px;
            border-radius: 50%;
            background: #fff;
            border: 1px solid #ddd;
            cursor: pointer;
        }

            .hierarchy-chart { 
        background: white; 
        padding: 30px; 
        border-radius: 12px; 
        margin-bottom: 30px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        min-height: 800px;
        overflow: auto;
    }
    
    .mermaid {
        font-size: 14px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .mermaid-wrapper {
        position: relative;
        width: 100%;
        height: 100%;
        overflow: auto;
    }

    .zoom-controls {
        position: fixed;
        bottom: 30px;
        right: 30px;
        z-index: 1000;
        display: flex;
        flex-direction: column;
        gap: 10px;
        background: white;
        padding: 10px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .zoom-btn {
        width: 40px;
        height: 40px;
        border-radius: 20px;
        border: none;
        background: #0d6efd;
        color: white;
        font-size: 18px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .zoom-btn:hover {
        transform: scale(1.1);
        background: #0b5ed7;
    }

    .legend {
        position: fixed;
        top: 20px;
        right: 20px;
        background: white;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 1000;
    }

    .legend-item {
        display: flex;
        align-items: center;
        margin-bottom: 8px;
    }

    .legend-color {
        width: 20px;
        height: 20px;
        border-radius: 4px;
        margin-right: 10px;
    }
    </style>
</head>
<body>
    <div class="container-fluid">
        <h1 class="section-title">NexusGuard Protocol Development Status</h1>

        <!-- Core Architecture -->
        <div class="hierarchy-chart">
            <h3>Complete Protocol Architecture</h3>
            <div class="mermaid">
                graph TB
                    %% Core Protocol Hub
                    NexusCore[NexusGuardDeFiProtocolV1] --> SecurityHub[SecurityManager]
                    NexusCore --> Registry[NexusGuardRegistry]
                    NexusCore --> Analytics[AnalyticsEngine]
                    NexusCore --> Visualization[VisualizationManager]
                    NexusCore --> Insurance[NexusGuardInsurance]
                    NexusCore --> PriceFeed[NexusGuardPriceFeed]
                    NexusCore --> EventBus[NexusGuardEventBus]

                    %% Core Base Layer
                    subgraph Core Base
                        BaseP[BaseProtocol]
                        BaseR[BaseRegistry]
                        IBaseC[IBaseComponent]
                        IBaseP[IBaseProtocol]
                        IBaseR[IBaseRegistry]
                    end

                    %% Security System
                    subgraph Security Components
                        SecurityHub --> AccessControl & BlocklistManager & EmergencySystem
                        SecurityHub --> FraudDetection & IntrusionDetection & RateLimiter
                        SecurityHub --> SecurityAudit & SecurityBenchmark & SecurityCompliance
                        SecurityHub --> SecurityComponent & SecurityConfiguration
                        SecurityHub --> SecurityIncidentResponse & SecurityPolicyManager
                        SecurityHub --> SecuritySelfHealing & SecurityTokenManager & SecurityUpdates
                        
                        %% Security Validation
                        SecurityHub --> ValidatorSystem[Security Validation]
                        ValidatorSystem --> BaseValidator & ComponentValidator & TransactionValidator
                        ValidatorSystem --> SecurityChecks & SecurityMetrics & SecurityPatterns
                        ValidatorSystem --> ValidatorRegistry

                        %% Security Monitoring
                        SecurityHub --> MonitoringSystem[Security Monitoring]
                        MonitoringSystem --> SecurityMonitor & MonitoringSystem
                        
                        %% State Synchronization
                        SecurityHub --> SyncSystem[State Synchronization]
                        SyncSystem --> NexusGuardStateSynchronizer & ValidatorStateSynchronizer
                    end

                    %% Analytics System
                    subgraph Analytics Components
                        Analytics --> MarketSentiment[MarketSentimentAnalyzer]
                        Analytics --> AdvancedIndicators[NexusGuardAdvancedIndicators]
                        Analytics --> MathAnalysis[NexusGuardMathematicalAnalysis]
                        Analytics --> RiskModel[NexusGuardRiskModel]
                        Analytics --> DataAgg[DataAggregator]
                        Analytics --> ReportGen[ReportGenerator]
                        
                        %% Analytics Storage & Validation
                        Analytics --> AnalyticsStorage
                        Analytics --> AnalyticsValidator
                    end

                    %% Visualization System
                    subgraph Visualization Components
                        Visualization --> AdvancedViz[Advanced Visualization]
                        AdvancedViz --> VisualizationBase[AdvancedVisualizationBase]
                        AdvancedViz --> MarketDepth[MarketDepthVisualizations]
                        AdvancedViz --> AnalyticsViz[AnalyticalVisualizationEngine]
                        
                        %% Visualization Subsystems
                        Visualization --> Charts[Chart System]
                        Charts --> NexusGuardAdvancedCharting
                        Charts --> ChartFormatters[Formatters]
                        ChartFormatters --> AmCharts & ApexCharts & ECharts & HighCharts & Plotly
                        
                        %% Real-time Components
                        Visualization --> RealTime[Real-time Processing]
                        RealTime --> EnhancedRealTimeHandler
                        RealTime --> RealTimeDataHandler
                    end

                    %% Integration System
                    subgraph Integration Layer
                        Registry --> CrossChain[Cross-Chain System]
                        CrossChain --> CrossChainManager
                        CrossChain --> NexusGuardBridge
                        
                        Registry --> Integration[Integration System]
                        Integration --> SecurityIntegration
                        Integration --> InsuranceIntegration
                        Integration --> PriceIntegration
                    end

                    %% Libraries
                    subgraph Libraries
                        Libs[Core Libraries] --> AnalyticsMath
                        Libs --> MetricProcessing
                        Libs --> NexusGuardMath
                        Libs --> RiskAssessment
                        Libs --> SharedConstants
                    end

                    %% Optimization
                    subgraph Optimization
                        OptSystem[Optimization System] --> BatchProcessor
                        OptSystem --> CacheManager
                        OptSystem --> GasOptimizer
                        
                        CacheManager --> AdvancedCache[Cache Components]
                        AdvancedCache --> CacheOptimizer & CoherencyProtocols
                        AdvancedCache --> CompressionEngine & DAGManager
                    end

                    %% Testing
                    subgraph Testing Framework
                        Tests[Test Suite] --> AutomatedTestSuite
                        Tests --> SimulationEngine
                        Tests --> StressTestManager
                        Tests --> TestHelper
                    end
            </div>

            <div class="legend">
    <h6>Component Types</h6>
    <div class="legend-item">
        <div class="legend-color" style="background: #0d6efd"></div>
        <span>Core Components</span>
    </div>
    <div class="legend-item">
        <div class="legend-color" style="background: #dc3545"></div>
        <span>Security Components</span>
    </div>
    <div class="legend-item">
        <div class="legend-color" style="background: #198754"></div>
        <span>Analytics Components</span>
    </div>
    <div class="legend-item">
        <div class="legend-color" style="background: #ffc107"></div>
        <span>Visualization Components</span>
    </div>
    <div class="legend-item">
        <div class="legend-color" style="background: #6f42c1"></div>
        <span>Integration Components</span>
    </div>
</div>

<div class="zoom-controls">
    <button class="zoom-btn" onclick="zoomIn()">+</button>
    <button class="zoom-btn" onclick="zoomOut()">−</button>
    <button class="zoom-btn" onclick="resetZoom()">⟲</button>
</div>
        </div>

        <!-- Sprint Board -->
        <h3 class="section-title">Current Sprint Status</h3>
        <div class="sprint-board">
            <!-- Backlog -->
            <div class="sprint-column">
                <h5>Backlog</h5>
                <div class="task-card critical">
                    <strong>Security Manager Integration</strong>
                    <p>Complete core security manager setup</p>
                    <small>Priority: Critical</small>
                </div>
                <div class="task-card high">
                    <strong>State Synchronization</strong>
                    <p>Implement validator state sync</p>
                    <small>Priority: High</small>
                </div>
            </div>

            <!-- In Progress -->
            <div class="sprint-column">
                <h5>In Progress</h5>
                <div class="task-card critical">
                    <strong>Access Control Implementation</strong>
                    <p>Implementing role-based access</p>
                    <small>Status: Active Development</small>
                </div>
                <div class="task-card high">
                    <strong>Analytics Engine Core</strong>
                    <p>Setting up analytics infrastructure</p>
                    <small>Status: Integration</small>
                </div>
            </div>

            <!-- Review -->
            <div class="sprint-column">
                <h5>Review</h5>
                <div class="task-card medium">
                    <strong>Base Protocol Implementation</strong>
                    <p>Core protocol structure review</p>
                    <small>Status: Under Review</small>
                </div>
            </div>

            <!-- Completed -->
            <div class="sprint-column">
                <h5>Completed</h5>
                <div class="task-card">
                    <strong>Project Structure</strong>
                    <p>Initial contract architecture</p>
                    <small>Status: Complete</small>
                </div>
                <div class="task-card">
                    <strong>Interface Definitions</strong>
                    <p>Core interface implementations</p>
                    <small>Status: Complete</small>
                </div>
            </div>
        </div>

        <!-- Next Steps -->
        <h3 class="section-title">Implementation Priority</h3>
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h5>Current Focus</h5>
                        <ul>
                            <li>Security Manager and Validator Integration</li>
                            <li>State Synchronization System</li>
                            <li>Core Protocol Implementation</li>
                            <li>Base Component Integration</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h5>Next Phase</h5>
                        <ul>
                            <li>Analytics Engine Integration</li>
                            <li>Visualization System Setup</li>
                            <li>Cross-Chain Communication</li>
                            <li>Advanced Security Features</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="zoom-controls">
        <button class="zoom-btn" onclick="zoomIn()">+</button>
        <button class="zoom-btn" onclick="zoomOut()">-</button>
    </div>

    <script>
    mermaid.initialize({
        theme: 'default',
        securityLevel: 'loose',
        flowchart: {
            curve: 'basis',
            padding: 30,
            useMaxWidth: true,
            htmlLabels: true,
            wrap: true,
            nodeSpacing: 100,
            rankSpacing: 100,
            diagramPadding: 50,
        },
        themeVariables: {
            fontFamily: 'Segoe UI',
            fontSize: '16px',
            primaryColor: '#0d6efd',
            primaryTextColor: '#fff',
            primaryBorderColor: '#0b5ed7',
            lineColor: '#666',
            secondaryColor: '#73c0ff',
            tertiaryColor: '#f5f5f5',
        }
    });

    // Update the mermaid diagram configuration
    let config = {
        graph: `
        graph TB
            %% Styling
            classDef core fill:#0d6efd,stroke:#0b5ed7,color:white,stroke-width:2px;
            classDef security fill:#dc3545,stroke:#b02a37,color:white,stroke-width:2px;
            classDef analytics fill:#198754,stroke:#146c43,color:white,stroke-width:2px;
            classDef visualization fill:#ffc107,stroke:#cc9a06,color:black,stroke-width:2px;
            classDef integration fill:#6f42c1,stroke:#593696,color:white,stroke-width:2px;
            classDef storage fill:#20c997,stroke:#19a27b,color:white,stroke-width:2px;

            %% Core Protocol Hub
            NexusCore[NexusGuardDeFiProtocolV1]:::core --> SecurityHub & Registry & Analytics & Visualization & Insurance & PriceFeed
            
            %% Security Components
            subgraph Security["Security System"]
                direction TB
                SecurityHub[SecurityManager]:::security
                SecurityValidation[Validation System]:::security
                SecurityMonitoring[Monitoring System]:::security
                
                SecurityHub --> SecurityValidation
                SecurityHub --> SecurityMonitoring
                
                SecurityValidation --> BaseValidator & ComponentValidator & TransactionValidator
                SecurityMonitoring --> SecurityMonitor
            end

            %% Analytics Components
            subgraph Analytics["Analytics System"]
                direction TB
                AnalyticsEngine[Analytics Engine]:::analytics
                MarketAnalysis[Market Analysis]:::analytics
                RiskAnalysis[Risk Analysis]:::analytics
                
                AnalyticsEngine --> MarketAnalysis & RiskAnalysis
                MarketAnalysis --> MarketSentiment & AdvancedIndicators
                RiskAnalysis --> RiskModel & MathAnalysis
            end

            %% Add more subgraphs and nodes with enhanced styling...
        `
    };

    // Enhanced zoom functionality
    let scale = 1;
    let translateX = 0;
    let translateY = 0;
    const ZOOM_SPEED = 0.1;

    function updateTransform() {
        const diagram = document.querySelector('.mermaid');
        diagram.style.transform = `scale(${scale}) translate(${translateX}px, ${translateY}px)`;
    }

    function zoomIn() {
        scale += ZOOM_SPEED;
        updateTransform();
    }

    function zoomOut() {
        scale = Math.max(0.1, scale - ZOOM_SPEED);
        updateTransform();
    }

    function resetZoom() {
        scale = 1;
        translateX = 0;
        translateY = 0;
        updateTransform();
    }

    // Add drag functionality
    let isDragging = false;
    let startX, startY;

    document.querySelector('.mermaid-wrapper').addEventListener('mousedown', (e) => {
        isDragging = true;
        startX = e.clientX - translateX;
        startY = e.clientY - translateY;
    });

    document.addEventListener('mousemove', (e) => {
        if (isDragging) {
            translateX = e.clientX - startX;
            translateY = e.clientY - startY;
            updateTransform();
        }
    });

    document.addEventListener('mouseup', () => {
        isDragging = false;
    });

    // Add mouse wheel zoom
    document.querySelector('.mermaid-wrapper').addEventListener('wheel', (e) => {
        e.preventDefault();
        if (e.deltaY < 0) {
            zoomIn();
        } else {
            zoomOut();
        }
    });
    </script>
</body>
</html>
